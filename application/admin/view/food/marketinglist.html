{extend name="public/base"/}
{block name="style"}
<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/libs/bootstrap-editable.css">
<link rel="stylesheet" type="text/css" href="__PUBLIC__/css/extraCss.css">
<script>
$(function(){
	$('#page-wrapper').css('paddingTop','20px');
})
</script>
<script src="__PUBLIC__/js/echarts.common.min.js"></script>

{/block}
{block name="header"}
<div class="header cl">
	<div class="head_left fl">
		<!--<img class="fl" src="images/login.png">-->
		<img class="fl" src="__PUBLIC__/images/ctlogo.png" style="margin-top: -12px;margin-left: -25px;">
	</div>
	<div class="head_right fr">
		<a href="#">
			<dl class="user">
				<dt></dt>
				<dd>个人中心</dd>
			</dl>
		</a>
		<a href="#">
			<dl class="shezhi">
				<dt></dt>
				<dd>系统设置</dd>
			</dl>
		</a>
		<a href="{:url('admin/index/logout')}">
			<dl class="exit">
				<dt></dt>
				<dd>退出</dd>
			</dl>
		</a>
	</div>
</div>
{/block}
{block name="body"}
<div class="main-box clearfix">
	<header class="main-box-header clearfix">
		<div class="pull-left">
			<h2>{$meta_title}</h2>
		</div>
	</header>
	<div class="main-box-body clearfix">
		<div style="font-size:18px;text-align:center;width: 70%;"><b>本周餐厅菜品售卖次数统计</b></div>
		<div id="leftBox" style="width: 70%;height:400px;"></div>
		<div id="rightBox" style="width: 70%;height:400px;"></div>
	</div>
	<script type="text/javascript">
        // 基于准备好的dom，初始化echarts实例
        var myChartLeft = echarts.init(document.getElementById('leftBox'));
        // 指定图表的配置项和数据
        option = {
			
		    tooltip : {
		        trigger: 'axis',
		        axisPointer : {            // 坐标轴指示器，坐标轴触发有效
		            type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
		        }
		    },
		    legend: {
		        data:['{$cook[0]['cookfoodName']}','{$cook[1]['cookfoodName']}','{$cook[2]['cookfoodName']}','{$cook[3]['cookfoodName']}','{$cook[4]['cookfoodName']}','{$cook[5]['cookfoodName']}','{$cook[6]['cookfoodName']}','{$cook[7]['cookfoodName']}','{$cook[8]['cookfoodName']}']
		    },
		    grid: {
		        left: '3%',
		        right: '4%',
		        bottom: '3%',
		        containLabel: true
		    },
		    xAxis : [
		        {
		            type : 'category',
		            data : ['周一','周二','周三','周四','周五','周六','周日']
		        }
		    ],
		    yAxis : [
		        {
		            type : 'value'
		        }
		    ],
		    series : [
		        {
		            name:'{$cook[0]['cookfoodName']}',
		            type:'bar',
		            stack: '1',
		            data:[{$cook[0]['clickNum'][0]}, {$cook[0]['clickNum'][1]}, {$cook[0]['clickNum'][2]}, {$cook[0]['clickNum'][3]}, {$cook[0]['clickNum'][4]}, {$cook[0]['clickNum'][5]}, {$cook[0]['clickNum'][6]}]
		        },
		        {
		            name:'{$cook[1]['cookfoodName']}',
		            type:'bar',
		            stack: '1',
		            data:[{$cook[1]['clickNum'][0]}, {$cook[1]['clickNum'][1]}, {$cook[1]['clickNum'][2]}, {$cook[1]['clickNum'][3]}, {$cook[1]['clickNum'][4]}, {$cook[1]['clickNum'][5]}, {$cook[1]['clickNum'][6]}]
		        },
		        {
		            name:'{$cook[2]['cookfoodName']}',
		            type:'bar',
		            stack: '1',
		            data:[{$cook[2]['clickNum'][0]}, {$cook[2]['clickNum'][1]}, {$cook[2]['clickNum'][2]}, {$cook[2]['clickNum'][3]}, {$cook[2]['clickNum'][4]}, {$cook[2]['clickNum'][5]}, {$cook[2]['clickNum'][6]}]
		        },
		        {
		            name:'{$cook[3]['cookfoodName']}',
		            type:'bar',
		            stack: '2',
		            data:[{$cook[3]['clickNum'][0]}, {$cook[3]['clickNum'][1]}, {$cook[3]['clickNum'][2]}, {$cook[3]['clickNum'][3]}, {$cook[3]['clickNum'][4]}, {$cook[3]['clickNum'][5]}, {$cook[3]['clickNum'][6]}]
		        },
		        {
		            name:'{$cook[4]['cookfoodName']}',
		            type:'bar',
		            stack: '2',
		            data:[{$cook[4]['clickNum'][0]}, {$cook[4]['clickNum'][1]}, {$cook[4]['clickNum'][2]}, {$cook[4]['clickNum'][3]}, {$cook[4]['clickNum'][4]}, {$cook[4]['clickNum'][5]}, {$cook[4]['clickNum'][6]}],

		        },
		        {
		            name:'{$cook[5]['cookfoodName']}',
		            type:'bar',
		            barWidth : 5,
		            stack: '2',
		            data:[{$cook[5]['clickNum'][0]}, {$cook[5]['clickNum'][1]}, {$cook[5]['clickNum'][2]}, {$cook[5]['clickNum'][3]}, {$cook[5]['clickNum'][4]}, {$cook[5]['clickNum'][5]}, {$cook[5]['clickNum'][6]}]
		        },
		        {
		            name:'{$cook[6]['cookfoodName']}',
		            type:'bar',
		            stack: '3',
		            data:[{$cook[6]['clickNum'][0]}, {$cook[6]['clickNum'][1]}, {$cook[6]['clickNum'][2]}, {$cook[6]['clickNum'][3]}, {$cook[6]['clickNum'][4]}, {$cook[6]['clickNum'][5]}, {$cook[6]['clickNum'][6]}]
		        },
		        {
		            name:'{$cook[7]['cookfoodName']}',
		            type:'bar',
		            stack: '3',
		            data:[{$cook[7]['clickNum'][0]}, {$cook[7]['clickNum'][1]}, {$cook[7]['clickNum'][2]}, {$cook[7]['clickNum'][3]}, {$cook[7]['clickNum'][4]}, {$cook[7]['clickNum'][5]}, {$cook[7]['clickNum'][6]}]
		        },
		        {
		            name:'{$cook[8]['cookfoodName']}',
		            type:'bar',
		            stack: '3',
		            data:[{$cook[8]['clickNum'][0]}, {$cook[8]['clickNum'][1]}, {$cook[8]['clickNum'][2]}, {$cook[8]['clickNum'][3]}, {$cook[8]['clickNum'][4]}, {$cook[8]['clickNum'][5]}, {$cook[8]['clickNum'][6]}]
		        }
		    ]
		};
         // 使用刚指定的配置项和数据显示图表。
         myChartLeft.setOption(option);

         $(function(){
         	var storageInfo = {$storageNum};
         	console.log(storageInfo);
         	var storageName = [];
         	var storageData = [];
         	
         	for(var i=0;i<storageInfo.length;i++){
         		var o = new Object();
         		storageName[i] = storageInfo[i]['title'];
         		o.value = storageInfo[i]['num'];
         		o.name = storageInfo[i]['title'];
         		storageData.push(o);
         	}
	        var myChartRight = echarts.init(document.getElementById('rightBox'));
	        option1 = {
			    title : {
			        text: '餐厅库存统计',
			        subtext: '统计详情',
			        x:'center'
			    },
			    tooltip : {
			        trigger: 'item',
			        formatter: "{a} <br/>{b} : {c} ({d}%)"
			    },
			    legend: {
			        orient: 'vertical',
			        left: 'left',
			        data: storageName
			    },
			    series : [
			        {
			            name: '材料入库量',
			            type: 'pie',
			            radius : '55%',
			            center: ['50%', '60%'],
			            data:storageData,
			            itemStyle: {
			                emphasis: {
			                    shadowBlur: 10,
			                    shadowOffsetX: 0,
			                    shadowColor: 'rgba(0, 0, 0, 0.5)'
			                }
			            }
			        }
			    ]
			};
	         myChartRight.setOption(option1);
         })
    </script>
</div>
{/block}